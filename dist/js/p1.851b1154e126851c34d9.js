(()=>{var e={265:()=>{console.log('\nScore: 160 / 160\n✅ Часы и календарь + 15\n✅ Приветствие + 10\n✅ Смена фонового изображения + 20\n✅ Виджет погоды + 15\n✅ Виджет цитата дня + 10\n✅ Аудиоплеер + 15\n✅ Продвинутый аудиоплеер + 20\n  Немного кастомизировала плеер: название трека отображается не над прогресс-баром, а над контролами\n✅ Перевод приложения на два языка (en/ru) + 15\n✅ Получение фонового изображения от API + 10\n✅ Настройки приложения + 20\n✅ Дополнительный функционал на выбор + 10\n  ToDo List - список дел (как в оригинальном приложении):\n  1. Есть возможность создавать/удалять/редактировать туду\n  2. Можно перемещать туду из раздела "Today" в раздел "Inbox" и обратно\n  3. Можно помечать туду как выполненные и они переносятся в раздел "Done"\n  4. При перезагрузке страницы туду и их расположение сохраняются\n\n')},351:()=>{const e=document.querySelectorAll(".widget"),t=document.querySelectorAll(".widget-checkbox");document.querySelector("#todoBtn");let o=[];function n(){const e=this.dataset.widget,t=this.checked;if(document.querySelector(`div[data-widget="${e}"]`).classList.toggle("hidden"),t){const t=o.indexOf(e);t>-1&&o.splice(t,1)}else o.push(e);localStorage.setItem("hidden",JSON.stringify(o))}window.addEventListener("load",(()=>{o=localStorage.getItem("hidden")?JSON.parse(localStorage.getItem("hidden")):[],o.map((t=>{e.forEach((e=>{e.dataset.widget===t&&e.classList.add("hidden")}))})),t.forEach((e=>{o.some((t=>t==e.dataset.widget))?e.checked=!1:e.checked=!0}))})),t.forEach((e=>{e.addEventListener("change",n)}))},52:()=>{const e=document.querySelector("#time");!function t(){const o=(new Date).toLocaleTimeString();e.textContent=o,setTimeout(t,1e3)}()},396:()=>{const e=document.querySelector("#settingBtn"),t=document.querySelector("#settingArea"),o=document.querySelector("#todoBtn"),n=document.querySelector("#todoPopup");let a=!1,c=!1;function i(){c&&d(),e.classList.toggle("revert"),t.classList.toggle("show"),a=!a}function d(){a&&i(),o.classList.toggle("revert"),n.classList.toggle("show"),c=!c}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("click",(r=>{const l=r.target;if(c&&l!==n&&!n.contains(l)&&l!==o){if(l.classList.contains("todo-item-move")||l.classList.contains("todo-item-delete"))return;d()}a&&l!==t&&!t.contains(l)&&l!==e&&i()}))})),e.addEventListener("click",i),o.addEventListener("click",d)}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,o),c.exports}(()=>{"use strict";function e(e){e.target.classList.contains("input-inactive")?(e.target.classList.add("input-active"),e.target.classList.remove("input-inactive")):(e.target.classList.add("input-inactive"),e.target.classList.remove("input-active"))}function t(){return localStorage.getItem("lang")?localStorage.getItem("lang"):"en"}const n=document.querySelector("#quoteChangeBtn"),a=document.querySelector("#quoteText"),c=document.querySelector("#quoteAuthor");let i,d,r;function l(){const e=t();d="en"===e?i.text_en:i.text_ru,r="en"===e?i.author_en:i.author_ru,a.textContent=`«${d}»`,c.textContent=`— ${r}`}async function s(){n.classList.toggle("revert"),await async function(){const e=await async function(){const e=await fetch("data/quotes.json");return await e.json()}();i=e[Math.floor(Math.random()*e.length)],l()}()}n.addEventListener("click",s),s();const u=document.querySelector("#greetingDaytime");async function m(){const e=(new Date).getHours();return e>=6&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<24?"evening":e>=0||e<6?"night":void 0}async function y(){const e=await m(),o=t();return"morning"===e?"en"==o?"Good morning":"Доброе утро":"afternoon"===e?"en"==o?"Good afternoon":"Добрый день":"evening"===e?"en"==o?"Good evening":"Добрый вечер":"night"===e?"en"==o?"Good night":"Доброй ночи":void setTimeout(y,1e3)}async function h(){const e=`${await y()},`;u.textContent=e}h();const g=document.querySelector("#greetingName");async function p(){const e=t();g.placeholder="en"===e?"[Enter name]":"[Введите имя]"}function v(){const e=localStorage.getItem("username");e&&(g.value=e)}p(),g.addEventListener("input",(()=>{localStorage.setItem("username",document.querySelector("#greetingName").value)})),g.addEventListener("focus",(t=>e(t))),g.addEventListener("blur",(t=>e(t))),window.addEventListener("load",(()=>{v()}));const f=[{id:1,title_en:"Chill Vibes",title_ru:"Классная Атмосфера",src:"./audio/chill-vibes.mp3",duration:32},{id:2,title_en:"Chillout",title_ru:"Расслабон",src:"./audio/chillout.mp3",duration:22},{id:3,title_en:"Easy Guitar",title_ru:"Легкая гитарка",src:"./audio/easy-guitar.mp3",duration:20}],S=document.querySelector("#audioPlayMain"),x=document.querySelector("#audioNextMain"),L=document.querySelector("#audioPrevMain"),q=document.querySelector("#audioName"),w=document.querySelector("#audioProgress"),E=document.querySelector("#audioProgressFill"),b=document.querySelector("#audioDurationEnd"),C=document.querySelector("#audioDurationCur"),k=document.querySelector("#audioVolumeRange"),$=document.querySelector("#audioVolumeBtn"),_=document.querySelector("#playlist");let I=t();_.innerHTML=`${f.length>0?f.map((e=>`<li class="playlist-item" data-id="${e.id}">\n              <button class="playlist-item__small-btn btn play" title="Play/Pause Audio"></button>\n              <div class="playlist-item__name">${"en"==I?e.title_en:e.title_ru}</div>\n            </li>`)).join(""):"---"}`;const T=document.querySelectorAll(".playlist-item"),M=document.querySelectorAll(".playlist-item__small-btn");let A,D=!1,N=0,H=f[0].duration;const P=new Audio;P.volume=.5,P.src=f[N].src,P.currentTime=0,P.dataset.id=f[N].id,A=document.querySelector(`[data-id="${P.dataset.id}"]`),A.classList.add("active"),q.textContent="en"==I?f[N].title_en:f[N].title_ru,b.textContent=`00:${H}`;let j=A.querySelector("button");function O(){D?(S.classList.add("audio-widget-pause-btn"),S.classList.remove("audio-widget-play-btn")):(S.classList.remove("audio-widget-pause-btn"),S.classList.add("audio-widget-play-btn"))}function B(){D?(j.classList.add("pause"),j.classList.remove("play")):(j.classList.remove("pause"),j.classList.add("play"))}function J(){D?P.pause():P.play(),D=!D,O(),B()}function G(){A.classList.remove("active"),j.classList.remove("pause"),j.classList.add("play"),j.addEventListener("click",J),P.src=f[N].src,P.currentTime=0,P.dataset.id=f[N].id,A=document.querySelector(`[data-id="${P.dataset.id}"]`),j=A.querySelector("button"),P.play(),A.classList.add("active"),j.classList.add("pause"),j.classList.remove("play"),D=!0,O(),B(),q.textContent="en"==I?f[N].title_en:f[N].title_ru,H=f[N].duration,b.textContent=`00:${H}`}function U(){N+1>=f.length?N=0:N++,G()}function W(){const e=[...this.parentElement.childNodes].indexOf(this);e!==N&&(N=e,G())}function R(){P.muted=!0,$.style.backgroundImage="url('./img/mute.png')",k.value=0,Q(0)}function V(){P.muted=!1,$.style.backgroundImage="url('./img/unmute.png')",k.value=P.volume,Q(P.volume)}function Q(e){k.style.background=`linear-gradient(to right, #d8d8d8 0%, #d8d8d8 ${70*e}%, #383838 ${100*e}%, #383838 100%)`}k.addEventListener("input",(e=>{!function(e){const t=+e.value;P.volume=t,Q(t),P.muted&&V(),0===t&&R()}(e.target)})),$.addEventListener("click",(function(){P.muted?V():R()})),S.addEventListener("click",J),x.addEventListener("click",U),L.addEventListener("click",(function(){N-1<0?N=f.length-1:N--,G()})),P.addEventListener("timeupdate",(function(){const e=P.currentTime/P.duration*100,t=Math.floor(P.currentTime).toString().padStart(2,0);E.style.flexBasis=`${e}%`,C.textContent=`00:${t}`,P.currentTime===P.duration&&U()})),M.forEach((e=>{e.addEventListener("click",J)})),T.forEach((e=>{e.addEventListener("click",W)})),w.addEventListener("click",(function(e){const t=e.offsetX/w.offsetWidth*P.duration;P.currentTime=t,E.classList.add("active"),setTimeout((()=>{E.classList.remove("active")}),500)}));const X=document.querySelector("#date"),Y={month:"long",day:"numeric",weekday:"long"};function Z(){const e="en"===t()?"en-US":"ru-RU",o=(new Date).toLocaleDateString(e,Y);X.textContent=o,setTimeout(Z,1e3)}Z();const z=document.querySelector("#weatherCity"),F=document.querySelector("#weatherIcon"),K=document.querySelector("#weatherTemp"),ee=document.querySelector("#weatherDesc"),te=document.querySelector("#weatherWind"),oe=document.querySelector("#weatherHumidity"),ne=document.querySelector(".weather-widget__error"),ae=document.querySelector(".weather-widget__info");let ce;async function ie(){const e=t();try{const t=`https://api.openweathermap.org/data/2.5/weather?q=${ce}&lang=${e}&appid=01d522b353a969527c35ef13f4db2c3e&units=metric`,o=await fetch(t),n=await o.json(),a=n.weather[0].id,c=n.weather[0].description,i=Math.floor(n.main.temp),d=Math.floor(n.wind.speed),r=Math.floor(n.main.humidity);F.classList.add(`owf-${a}`),K.textContent=`${i} °C`,ee.textContent=c,te.textContent=`${"en"==e?"Wind speed":"Скорость ветра"}: ${d} m/c`,oe.textContent=`${"en"==e?"Humidity":"Влажность"}: ${r} %`,ne.classList.add("hidden"),ae.classList.remove("hidden")}catch(e){ne.classList.remove("hidden"),ae.classList.add("hidden"),ne.textContent=`Unfortunately, there is no place for "${ce}" on Earth... :(`}}z.addEventListener("focus",(t=>e(t))),z.addEventListener("blur",(t=>e(t))),z.addEventListener("change",(e=>{ce=e.target.value,ie()})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("city",document.querySelector("#weatherCity").value)})),window.addEventListener("load",(()=>{localStorage.getItem("city")?(ce=localStorage.getItem("city"),document.querySelector("#weatherCity").value=localStorage.getItem("city")):(ce="Минск",document.querySelector("#weatherCity").value="Minsk"),ie()}));const de=document.querySelectorAll('input[name="lang"]'),re=document.querySelector(".langs-title"),le=document.querySelector(".en-radio"),se=document.querySelector(".ru-radio"),ue=document.querySelector(".widgets-title"),me=document.querySelector(".audio-checkbox"),ye=document.querySelector(".weather-checkbox"),he=document.querySelector(".time-checkbox"),ge=document.querySelector(".date-checkbox"),pe=document.querySelector(".greeting-checkbox"),ve=document.querySelector(".quote-checkbox"),fe=document.querySelector(".todo-checkbox"),Se=document.querySelector(".photos-title"),xe=document.querySelector(".phototag-title"),Le=document.querySelector(".photo-note");function qe(){"ru"===t()?(re.textContent="Настройки",le.textContent="Английский",se.textContent="Русский",ue.textContent="Активные виджеты",me.textContent="Аудио",ye.textContent="Погода",he.textContent="Время",ge.textContent="Дата",pe.textContent="Приветствие",ve.textContent="Цитата",fe.textContent="Дела",Se.textContent="Фон",xe.textContent="Фото тэг",Le.textContent="*если выбран не github может быть задержка"):(re.textContent="Settings",le.textContent="English",se.textContent="Russian",ue.textContent="Active widgets",me.textContent="Audio",ye.textContent="Weather",he.textContent="Time",ge.textContent="Date",pe.textContent="Greeting",ve.textContent="Quote",fe.textContent="Todo",Se.textContent="Photo Source",xe.textContent="Photo Tag",Le.textContent="*if you chose not github, changing images can be slow")}qe(),de.forEach((e=>{e.addEventListener("change",Ve)}));const we=document.querySelectorAll("input[data-todolist]"),Ee=document.querySelectorAll("ul[data-todolist]"),be=document.querySelector("#newtodo"),Ce=document.querySelector(".inbox-title"),ke=document.querySelector(".today-title"),$e=document.querySelector(".done-title"),_e=document.querySelector(".new-todo-input");let Ie,Te,Me="inbox",Ae=document.querySelector('ul[data-todolist="inbox"]');function De(){Me=this.dataset.todolist,Ae=document.querySelector(`ul[data-todolist="${Me}"]`),Ee.forEach((e=>e.dataset.todolist===Me?e.classList.remove("hidden"):e.classList.add("hidden"))),Be()}function Ne(e){const t=e.target.dataset.id,o=e.target.dataset.category;let n;"done"===Me?(n=Ie[o].map((e=>e.id==t?{...e,completed:!1}:e)),Ie[o]=n):n=Ie[Me].map((e=>e.id==t?{...e,completed:!e.completed}:e)),Ie[Me]=n;let a=Ie.inbox.filter((e=>e.completed)),c=Ie.today.filter((e=>e.completed));Ie.done=a.concat(c),Je(),Be()}function He(e){const t=e.target,o=t.closest(".todo-item"),n=o.attributes["data-todoid"].value,a=o.attributes["data-category"].value;t.parentElement.parentElement.classList.add("hidden");let c=Ie[a].findIndex((e=>e.id==n));Ie[a].splice(c,1);let i=Ie.inbox.filter((e=>e.completed)),d=Ie.today.filter((e=>e.completed));Ie.done=i.concat(d),Je(),Be()}function Pe(){const e=this.closest(".todo-item"),t=e.querySelector(".todo-item-text"),o=e.attributes["data-todoid"].value;this.parentElement.parentElement.classList.add("todo-menu-hidden"),t.disabled=!1,t.focus();let n=t.value;t.value="",t.value=n,t.addEventListener("change",(()=>function(e,t){const o=Ie[Me].map((o=>o.id==t?{...o,text:e.value}:o));Ie[Me]=o,e.disabled=!0;let n=Ie.inbox.filter((e=>e.completed)),a=Ie.today.filter((e=>e.completed));Ie.done=n.concat(a),Je(),Be()}(t,o)))}function je(){const e=this.closest(".todo-item"),t=e.attributes["data-todoid"].value,o=e.attributes["data-category"].value,n="inbox"==o?"today":"inbox",a={...Ie[o].find((e=>e.id==t)),category:n};let c=Ie[o].findIndex((e=>e.id==t));Ie[o].splice(c,1),Ie[n].push(a),Je(),Be()}function Oe(e){const t=e.target.parentNode.querySelector(".todo-menu");Te&&Te!=t&&Te.classList.add("todo-menu-hidden"),t.classList.contains("todo-menu-hidden")?t.classList.remove("todo-menu-hidden"):t.classList.add("todo-menu-hidden"),Te=t}async function Be(){Ae.innerHTML=Ie[Me].length>0?Ie[Me].map((e=>`\n        <li class="${!0===e.completed?"todo-item todo-item--completed":"todo-item"}" data-todoid="${e.id}" data-category="${e.category}">\n        \n          <label class="checkbox-container">\n            <input class="checkbox-input todo-checkbox" type="checkbox" data-id="${e.id}" data-category="${e.category}" ${!0===e.completed?"checked":""}>\n            <span class="checkbox-checkmark"></span>\n          </label>\n          \n          <input class="input todo-item-text" value="${e.text}" disabled />\n          <div class="todo-item-menu-area">\n            <button class="todo-item-menu btn input-inactive" title="Todo Menu" data-id="${e.id}" data-category="${e.category}"></button>\n            <div class="todo-menu todo-menu-hidden">\n              <ul class="todo-menu-list">\n                <li class="${"done"===Me?"todo-item-edit hidden":"todo-item-edit"}">\n                  Edit\n                </li>\n                <li class="${"done"===Me?"todo-item-move hidden":"todo-item-move"}">Move\n                </li>\n                <li class="todo-item-delete">\n                  Delete\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>`)).join(""):`<div class="todolist-empty">\n          <h3>${"done"===Me?'<div class="todo-empty-done"></div>':"today"===Me?'<div class="todo-empty-today"></div>':'<div class="todo-empty-inbox"></div>'}</h3>\n        </div>`;const e=document.querySelectorAll(".todo-checkbox"),t=document.querySelectorAll(".todo-item-menu"),o=document.querySelectorAll(".todo-item-edit"),n=document.querySelectorAll(".todo-item-delete"),a=document.querySelectorAll(".todo-item-move");e.forEach((e=>e.addEventListener("change",Ne))),t.forEach((e=>e.addEventListener("click",Oe))),n.forEach((e=>e.addEventListener("click",He))),o.forEach((e=>e.addEventListener("click",Pe))),a.forEach((e=>e.addEventListener("click",je))),Ge()}function Je(){localStorage.setItem("todos",JSON.stringify(Ie))}function Ge(){const e=t(),o=document.querySelectorAll(".todo-item-edit"),n=document.querySelectorAll(".todo-item-delete"),a=document.querySelectorAll(".todo-item-move"),c=document.querySelector(".todo-empty-done"),i=document.querySelector(".todo-empty-today"),d=document.querySelector(".todo-empty-inbox");"ru"===e?(Ce.textContent="Общее",ke.textContent="Сегодня",$e.textContent="Выполнено",o.forEach((e=>e.textContent="Изменить")),n.forEach((e=>e.textContent="Удалить")),a.forEach((e=>e.textContent="Переместить")),c&&(c.innerHTML='Вы не закончили ни одно дело... <span class="note">Скорее выполните что-то!</span>'),i&&(i.innerHTML='Здесь будут ваши дела на сегодня <span class="note">(наконец помыть посуду?)</span>'),d&&(d.innerHTML='Здесь будут ваши общие дела <span class="note">(может жизненная цель?)</span>'),_e.placeholder="Новое дело..."):(Ce.textContent="Inbox",ke.textContent="Today",$e.textContent="Done",o.forEach((e=>e.textContent="Edit")),n.forEach((e=>e.textContent="Delete")),a.forEach((e=>e.textContent="Move")),c&&(c.innerHTML='You haven\'t completed any todo yet... <span class="note">Hurry up to do something!</span>'),i&&(i.innerHTML='Place for your today\'s todo <span class="note">(finally wash the dishes?)</span>'),d&&(d.innerHTML='The place for your general todo <span class="note">(maybe a lifegoal?)</span>'),_e.placeholder="New todo...")}we.forEach((e=>e.addEventListener("change",De))),be.addEventListener("focus",(t=>e(t))),be.addEventListener("blur",(t=>e(t))),be.addEventListener("keyup",(e=>{13===e.keyCode&&(e.preventDefault(),function(e){const t=e.target,o=t.value;let n;"done"===Me?(n={id:Date.now(),text:o,category:"inbox",completed:!0},Ie.inbox.push(n)):n={id:Date.now(),text:o,category:Me,completed:!1},Ie[Me].push(n),Je(),Be(),t.value=""}(e))})),window.addEventListener("load",(async()=>{Ie=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):{inbox:[],today:[],done:[]},await Be()}));const Ue=document.querySelector("#enLang"),We=document.querySelector("#ruLang");let Re;function Ve(){const e=this.value;localStorage.setItem("lang",e),Re=this.value,l(),h(),p(),v(),async function(){I=t(),T.forEach((e=>e.querySelector(".playlist-item__name").textContent="en"==I?f[e.dataset.id-1].title_en:f[e.dataset.id-1].title_ru)),q.textContent="en"==I?f[N].title_en:f[N].title_ru}(),Z(),ie(),qe(),Ge()}window.addEventListener("load",(()=>{"en"==t()?Ue.checked=!0:(Ue.checked=!1,We.checked=!0)})),o(52);const Qe=document.querySelectorAll(".source-radio"),Xe=document.querySelector("#photoTag");let Ye,Ze;async function ze(){Ye=this.dataset.source,localStorage.setItem("source",JSON.stringify(Ye)),at()}function Fe(){return Ye=localStorage.getItem("source")?JSON.parse(localStorage.getItem("source")):"github",Ye}function Ke(){return localStorage.getItem("tag")?(Ze=JSON.parse(localStorage.getItem("tag")),Xe.value=Ze):(Xe.value="nature",Ze="nature"),"github"===Ye?(Xe.value="-",Xe.disabled=!0):(Xe.value=Ze,Xe.disabled=!1),Ze}window.addEventListener("load",(()=>{Ze=Ke(),Ye=Fe(),Qe.forEach((e=>{e.dataset.source===Ye?e.checked=!0:e.checked=!1}))})),Qe.forEach((e=>{e.addEventListener("change",ze)})),Xe.addEventListener("change",(function(){Ze=this.value,localStorage.setItem("tag",JSON.stringify(Ze)),at()}));const et=document.querySelector("#slidePrev"),tt=document.querySelector("#slideNext"),ot=document.querySelector("#imageLoader");et.addEventListener("click",(function(){1!=nt?nt--:nt=20,at()})),tt.addEventListener("click",(function(){20!=nt?nt++:nt=1,at()}));let nt=Math.floor(20*Math.random())+1;async function at(){ot.classList.add("show");const e=await m(),t=Fe(),o=Ke();let n;if("unsplash"===t){const t=await fetch(`https://api.unsplash.com/photos/random?orientation=landscape&per_page=1&query=${e}/${o}&client_id=ZMe8BGgm8MXpmbZUBCgMi4m1CTgEQhzy90dkk9gjcpY`);n=(await t.json()).urls.raw}if("flickr"===t){const t=await fetch(`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=d67d8fac287c9a1f0a13e08a11231403&tags=${e},${o}&tag_mode=all&extras=url_h&format=json&nojsoncallback=1`),a=(await t.json()).photos.photo;n=a[Math.floor(Math.random()*a.length)].url_h}var a;"github"===t&&(n=`https://raw.githubusercontent.com/liliyavoloshina/stage1-tasks/assets/images/${e}/${a=nt,a.toString().padStart(2,0)}.jpg`);const c=new Image;c.src=n,c.addEventListener("load",(()=>{document.body.style.backgroundImage=`url('${c.src}')`,ot.classList.remove("show")}))}at(),o(351),o(396),o(265)})()})();